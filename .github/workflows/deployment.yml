name : Test Project
on : 
  push : 
    branches :
      - master
jobs : 
  test :
    runs-on : ubuntu-latest
    steps :
      - name : Get Code
        uses : actions/checkout@v3
      - name : Install Nodejs
        uses : actions/setup-node@v3
        with : 
          node-version : 18
      - name : Install dependencies
        run  : npm ci
      - name : Run tests
        run : npm test
  build :
    needs : test
    runs-on : ubuntu-latest
    steps:f
      - name : Get Code
        uses : actions/checkout@v3
      - name : Install Nodejs
        uses : actions/setup-node@v3
        with : 
          node-version : 18
      - name : Install dependencies
        run  : npm ci
      - name : Build Project
        run  : npm run build
      - name : Publish JS filename
        run  : find build/static/js/*.js -type f -execdir echo '{}' ';'
      - name : Upload artifacts
        uses  : actions/upload-artifact@v3
        with : 
          name : dist-files
          path : build
  deploy :
    needs : build
    runs-on : ubuntu-latest
    steps: 
      - name : Get build artifacts
        uses : actions/download-artifact@v3
        with :
          name : dist-files
      - name : Listing files
        run : tree



